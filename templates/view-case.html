{% extends "base.html" %}
{% block content %}
<div class="container-lg">
<h3 class="my-3">Edit Case (# {{ case.case_number }})</h3>

<form class="row g-3 mx-auto" method="POST" action="{{ url_for('edit_case', case_id=case._id) }}">

<div class="col-md-6">
  <fieldset id="fieldset1" disabled="disabled">
  <div class="mb-3">
    <label for="date"  class="form-label">Date :</label>
    <input type="date" class="form-control" id="date" name="date" value="{{ case.date }}" required>
  </div>
  <div class="mb-3">
    <label for="species" class="form-label"> Species : </label>
    <select class="form-select" id="species" aria-label="Species" name="species" required>
      {% for species in speciess %}
      {% if species.species == case.species %}
      <option value="{{ species.species }}" selected>{{ species.species }}</option>
      {% else %}
      <option value="{{ species.species }}">{{ species.species }}</option>
      {% endif %}
      {% endfor %}
    </select>
  </div>
  <div class="mb-3">
    <label for="location" class="form-label">Location : </label>
    <input type="text" class="form-control" id="location" name="location" value="{{ case.location }}" required>
  </div>
  <div class="mb-3">
    <label for="reason" class="form-label">Reason for rescue :</label>
    <select class="form-select" id="reason" aria-label="Reason" name="reason" >
      {% for reason in reasons %}
      {% if reason.Reason == case.reason %}
      <option value="{{ reason.Reason }}" selected>{{ reason.Reason }}</option>
      {% else %}
      <option value="{{ reason.Reason }}">{{ reason.Reason }}</option>
      {% endif %}
      {% endfor %}
    </select>
  </div>
  <div class="mb-3">
    <label for="criminal" class="form-label"> Deemed Criminal : </label> 
    <select class="form-select" id="criminal" aria-label="Deemed criminal" name="criminal" value="{{ case.criminal }}">
        <option value="Yes">Yes</option>
        <option value="No" selected>No</option>
      </select>
    </div>
  </fieldset>
</div>

<div class="col-md-6">
  <fieldset id="fieldset2" disabled="disabled">
    <div class="mb-3">
      <label for="image" class="form-label">Image : </label>
      <input type="url" class="form-control" id="image" name="image_url" value="{{ case.image_url }}">
    </div>
  <div class="mb-3">
    <label for="status" class="form-label">Status:</label>
    <select class="form-select" id="status" aria-label="status" name="status" >
      {% for status in statuses %}
      {% if  status.status == case.status %}
      <option value="{{ status.status }}" selected>{{ status.status }}</option>
      {% else %}
      <option value="{{ status.status }}">{{ status.status }}</option>
      {% endif %}
      {% endfor %}
    </select>
  </div>
  <div class="mb-3">
  <label for="notes" class="form-label">Any notes or comments</label>
  <textarea class="form-control" name="notes" id="notes" rows="10" cols="30">{{ case.notes }}</textarea>
  </div>
  <div class="mb-3">
    <button id="saveCaseBtn"" type="submit" class="btn btn-success visually-hidden">Save changes</button>
    <a id="deleteCaseBtn" class="btn btn-danger visually-hidden" href="{{ url_for('delete_case', case_id=case._id) }}">Delete Case</a>
  </div>
</fieldset>
{% if (session.user|lower == case.created_by|lower) or (session.user|lower == 'admin@wildliferescue.com')  %}
<div class="mb-3">
  <button id="editCaseBtn"" type="button" class="btn btn-primary">Edit this case</button>
</div>
{% endif %}
<div class="mb-3">
  <a href="{{ url_for('get_cases') }}" class="btn btn-link fs-4">Go Back</a>
</div>
</div>

</form>
</div>
<script src="{{ url_for('static', filename='js/case-edit.js') }}"></script>
{% endblock %}